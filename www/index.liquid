{% include "partials/header.liquid" %}

<div class="card">
  <div class="card-body">
    <h5 class="card-title">ICalendar Link:</h5>
    <div class="card">
      <div class="card-body">
        <a href="https://knot.maguire.tech/ical" target="_blank">https://knot.maguire.tech/ical</a>
      </div>
    </div>
    <a href="https://support.google.com/calendar/answer/37100?hl=en" class="card-link">Setup for Google Calendar</a>
    <a href="https://support.apple.com/en-gb/HT202361" class="card-link">Setup for Apple Calendar</a>
  </div>
</div>

<br>

<h3>
  Future
</h3>
<ul>
  {% for row in events_to_happen %}
    <li>
      <a href="\#event-{{row.event.id}}">{{ row.event.event_name }}
      </a>
    </li>
  {% endfor %}
</ul>

<h3>
  Past
</h3>
<ul>
  {% for row in happened_events %}
    <li>
      <a href="\#event-{{row.event.id}}">{{ row.event.event_name }}
      </a>
    </li>
  {% endfor %}
</ul>

<h2>Future Events</h2>

<br><br>

{% for row in events_to_happen %}
  <div class="card">
    <div class="card-body">
      <h2 class="card-title" id="event-{{row.event.id}}">
        {{ row.event.event_name }}
      </h2>

      <br>

      <p class="card-text">
        Happening at
        <i>{{ row.event.date }}</i>
        in/at
        <i>{{ row.event.location }}</i>
        managed by
        <i>{{ row.event.teacher }}</i>.
      </p>
      <p class="card-text">
        Notes: {{ row.event.other_info }}
      </p>

      <a href="/update_event/{{row.event.id}}" class="btn btn-primary centred">Modify the details, add photos/people</a>

      <br>
      <br>
      <br>

      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h3 class="card-title">Prefects</h3>
              <ul>
                {% for prefect in row.prefects %}
                  <li>{{ prefect }}</li>
                {% endfor %}
              </ul>
            </div>
            <div class="col">
              <h3 class="card-title">Participants</h3>
              {% for participant in row.participants %}
                <li>{{ participant }}</li>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <br>

      <div class="card">
        <div class="card-body">
          <h3 class="card-title">Photos</h3>

          <div class="row">
            <div class="col">
              <form
                action="/add_image/{{row.event.id}}"
                method="POST"
                enctype=multipart/form-data>
                <div class="mb-3">
                  <label for="photo" class="form-label">Add Photo:</label>
                  <input
                    type="file"
                    name="photo"
                    id="photo"
                    class="form-control"
                    accept="image/bmp, image/exr, image/gif, image/hdr, image/ico, image/jpeg, image/png, image/qoi, image/tiff, image/webp"
                    required>
                </div>

                <button type="submit" class="btn btn-primary">Add photo.</button>
              </form>
            </div>
            <div class="col">
              <a
                href="/get_all_imgs/{{row.event.id}}"
                target="_blank"
                class="btn btn-primary">Download all images</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <br>
{% endfor %}


<h2>Past Events</h2>

{% for row in happened_events %}
  <div class="card">
    <div class="card-body">
      <h2 class="card-title" id="event-{{row.event.id}}">
        {{ row.event.event_name }}
      </h2>

      <br>

      <p class="card-text">
        Happening at
        <i>{{ row.event.date }}</i>
        in/at
        <i>{{ row.event.location }}</i>
        managed by
        <i>{{ row.event.teacher }}</i>.
      </p>
      <p class="card-text">
        Notes: {{ row.event.other_info }}
      </p>
      <a href="/update_event/{{row.event.id}}" class="btn btn-primary centred">Modify the details, add photos/people</a>

      <br>
      <br>
      <br>

      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h3 class="card-title">Prefects</h3>
              <ul>
                {% for prefect in row.prefects %}
                  <li>{{ prefect }}</li>
                {% endfor %}
              </ul>
            </div>
            <div class="col">
              <h3 class="card-title">Participants</h3>
              {% for participant in row.participants %}
                <li>{{ participant }}</li>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <br>

      <div class="card">
        <div class="card-body">
          <h3 class="card-title">Photos</h3>

          <div class="row">
            <div class="col">
              <form
                action="/add_image/{{row.event.id}}"
                method="POST"
                enctype=multipart/form-data>
                <div class="mb-3">
                  <label for="photo" class="form-label">Add Photo:</label>
                  <input
                    type="file"
                    name="photo"
                    id="photo"
                    class="form-control"
                    accept="image/bmp, image/exr, image/gif, image/hdr, image/ico, image/jpeg, image/png, image/qoi, image/tiff, image/webp"
                    required>
                </div>

                <button type="submit" class="btn btn-primary">Add photo.</button>
              </form>
            </div>
            <div class="col">
              <a
                href="/get_all_imgs/{{row.event.id}}"
                target="_blank"
                class="btn btn-primary">Download all images</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <br>
{% endfor %}

{% include "partials/footer.liquid" %}